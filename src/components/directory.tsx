import { Html } from "@elysiajs/html";
import FileView from "./file";
import { DirectoryDetails } from "../utils/files_repository";
import PathBar from "./pathbar";
import SearchBar from "./searchbar";

export interface DirectoryProps {
    details: DirectoryDetails
}

const Directory = (props: DirectoryProps) => {
    return (
        <div style={{ display: "flex", flexDirection: "column", overflow: "hidden", flex: 1, height: "100%" }}>
            <div style={{ display: "flex", flexDirection: "column", width: "100%", padding: "10px" }}>
                <div style={{ display: "flex", flexDirection: "row", alignItems: "center", justifyContent: "space-between", padding: "10px 0" }}>
                    <h2 class="directory-name">{props.details.name}</h2>
                    <div class="directory-actions" style={{ display: "flex", flexDirection: "row", gap: "1rem" }}>
                        <SearchBar name={props.details.name}/>
                        <svg xmlns="http://www.w3.org/2000/svg" width={"1.6rem"} height={"1.6rem"} viewBox="0 0 24 24"><path fill="currentColor" fillRule="evenodd" d="M23.267 2.594c-.42-1.169-1.728-1.109-2.937-.999c-.56.08-1.24-.24-1.29.21a.29.29 0 0 0 .18.31q.586.09 1.18.1c.779-.07 1.918-.17 2.148.58c.85 2.817.12 5.514.33 16.475c.075.764.075 1.534 0 2.298c-.06 0-.21.07-.37.08c-.52 0-2.838-.1-2.878-.08a.33.33 0 0 0 0 .62c.08 0 2.538.22 2.948.22a1.45 1.45 0 0 0 .859-.23c.53-.51.33-2.338.34-2.908c.21-9.732.55-13.778-.51-16.676M3.663 1.645c-1.218-.16-2.517-.22-2.937 1c-1.04 2.817-.72 6.434-.51 16.675c0 .59-.19 2.408.34 2.908c.255.166.556.246.86.23c.409 0 2.867-.18 2.997-.22a.33.33 0 0 0 0-.62s-2.358.11-2.878.08c-.16 0-.31-.11-.37-.08a12.5 12.5 0 0 1 0-2.298c.16-10.9-.579-13.648.28-16.476c.23-.75 1.37-.65 2.149-.58q.592-.01 1.179-.1a.26.26 0 0 0 .17-.31c-.04-.449-.73-.129-1.28-.209m12.64 8.363a16.2 16.2 0 0 0-2.468-3.997c-.42-.48-.8-1.149-1.699-1.089c-2.228.17-7.094 5.795-5.765 7.404c.63.76 3.138-.92 3.797-1.589c.11 1.09.72 7.404 1 8.194a.27.27 0 0 0 .509-.16c-.29-.93-.68-8.073-.77-8.693s-.769-.59-1.189-.06a6.9 6.9 0 0 1-2.627 1.589c.017-.23.082-.455.19-.66c.699-1.628 4.226-5.805 5.295-4.826a17.5 17.5 0 0 1 3.327 5.246c-1.289-.54-2.438-1.998-2.937-1.998a.49.49 0 0 0-.4.51c.13 1.268.28-.88-.75 8.992a.31.31 0 0 0 .61 0c0 .07 1.2-6.215 1-8.183c.679.569 1.638 1.558 2.737 1.588c.48 0 .8-.34.59-1.119a11 11 0 0 0-.45-1.149" clipRule="evenodd"></path></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width={"1.6rem"} height={"1.6rem"} viewBox="0 0 24 24"><g fill="currentColor" fillRule="evenodd" clipRule="evenodd"><path d="M9.857 14.76a6.2 6.2 0 0 0 2.572.28a5.473 5.473 0 0 0 4.001-9.004a5.712 5.712 0 0 0-9.154.57c-1.61 2.392-.78 5.893.83 6.934a.302.302 0 1 0 .34-.5c-1.28-.9-1.86-4.002-.41-5.893a4.802 4.802 0 0 1 7.514-.39c2.381 2.82 1 7.083-3.212 7.573a5.5 5.5 0 0 1-2.29-.16a.34.34 0 1 0-.19.59"></path><path d="M23.644 5.816c-.12-1.09-.07-3.272-.92-3.872c-1.911-1.36-6.063-.99-8.815-1.09c-3.501-.12-7.153.16-10.625.25a.34.34 0 1 0 0 .67c3.452 0 7.054-.26 10.585-.08c2.431.13 6.673-.13 8.264 1c.38.28.39 2.452.47 3.202c.339 2.69.362 5.41.07 8.104a11.8 11.8 0 0 1-.44 2.641c-2.52 1.27-19.74 2.201-20.76.56a17.3 17.3 0 0 1-.64-4.151a58 58 0 0 1 .6-10.846a.311.311 0 1 0-.44-.44c-.39.39-.31 1.64-.38 2.071a44 44 0 0 0-.52 10.185c.047 1.248.252 2.485.61 3.682c.84 1.41 6.323 1.46 8.004 1.47a4.3 4.3 0 0 0-.89 3.002c-.771 0-1.491.12-2.162.15a.3.3 0 1 0 0 .6c2.001.07 3.532.27 6.003.25s4.062-.23 6.073-.38a.34.34 0 1 0 0-.67h-1.84a8.7 8.7 0 0 0-1.001-3.152c1.34-.1 7.553-.53 8.294-1.63a8.7 8.7 0 0 0 .64-3.162a34 34 0 0 0-.18-8.364M15.12 22.124c-2.741-.06-4.182-.09-6.553 0c.16-.39.39-.9.51-1.29q.216-.814.3-1.652c0-.14-.34.12 4.682-.19a6.8 6.8 0 0 0 1.06 3.132"></path><path d="M11.568 9.098a9.8 9.8 0 0 0-2.411.51a.3.3 0 1 0 .11.59h2.301q.093 1.06 0 2.121a.34.34 0 0 0 .2.473a.342.342 0 0 0 .44-.263c.265-.76.417-1.556.45-2.36a12.6 12.6 0 0 1 2.092 0a.34.34 0 0 0 .15-.661a9.6 9.6 0 0 0-2.001-.41c-.24 0-.18 0-.19-.13q-.09-1.129-.3-2.241s0-.56-.24-.6s-.42.12-.37.6c-.13 1.36-.19 1.21-.23 2.37"></path></g></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width={"1.6rem"} height={"1.6rem"} viewBox="0 0 24 24"><g fill="currentColor" fillRule="evenodd" clipRule="evenodd"><path d="M22.049 7.077a4 4 0 0 1-1.001 0c-.85-.09-1.822-.31-2.573-.38a62 62 0 0 0-4.764-.3c-1.612-.03-3.203 0-4.765.11l-4.614.31a.31.31 0 0 0 .12-.26c.12 0 .12-.5.14-.56q.114-.321.32-.591a1 1 0 0 1 .46-.34q1.186-.38 2.413-.591a26.5 26.5 0 0 1 3.734-.35c1.436-.1 2.878-.1 4.314 0c.948.055 1.887.21 2.803.46a.59.59 0 0 1 .35.37q.125.393.17.801a.36.36 0 0 0 .39.29a.34.34 0 0 0 .29-.39a3.8 3.8 0 0 0-.23-1.151a1.23 1.23 0 0 0-.73-.68a14.2 14.2 0 0 0-3.003-.701s-.58-1.512-.59-1.522A3.8 3.8 0 0 0 14.21.411a2.64 2.64 0 0 0-1.651-.4a5.1 5.1 0 0 0-1.522.36c-.507.221-.95.565-1.291 1a7.6 7.6 0 0 0-.66 1.843c-.281 0-.581.08-.862.14a15.3 15.3 0 0 0-3.143 1a1.85 1.85 0 0 0-.64.491c-.224.3-.387.64-.48 1.001q-.092.346-.14.7a.38.38 0 0 0 .09.281l.07.02c-3.544.25-2.273.831-2.003.821q.339-.02.671-.08h6.336c1.301 0 2.623-.06 3.954-.07h2.643c1 0 1.891 0 2.822.06c.741 0 1.722.19 2.573.24c.399.048.802.048 1.201 0a.34.34 0 0 0 .28-.39a.352.352 0 0 0-.41-.35m-11.59-5.065a2.5 2.5 0 0 1 .77-.47a4.8 4.8 0 0 1 1.442-.341a1.63 1.63 0 0 1 1 .15c.344.198.649.456.902.76c.05.07.27.591.44.942a30 30 0 0 0-3.543-.04c-.48 0-.971 0-1.482.07c.23-.37.38-1.011.47-1.071m10.191 6.646a.31.31 0 0 0-.43 0a.32.32 0 0 0 0 .38v.37a39 39 0 0 1-.571 4.765c-.34 2.062-.751 4.164-1.061 5.235c-.14.491-.24 1.001-.41 1.482c-.092.28-.227.544-.401.78c-.41.492-.975.827-1.602.952a9 9 0 0 1-3.153.21c-1.421-.15-3.003 0-4.434-.19a4.7 4.7 0 0 1-1.602-.52a1.83 1.83 0 0 1-.64-.842a8 8 0 0 1-.591-1.882c-.15-.83-.33-1.871-.51-3.002c-.42-2.663-.861-5.706-1.062-7.007a.36.36 0 0 0-.39-.3a.35.35 0 0 0-.29.39c.16 1.321.51 4.364.86 7.007c.14 1.13.28 2.192.411 3.003a9.3 9.3 0 0 0 .61 2.162a2.93 2.93 0 0 0 1.022 1.381a5.6 5.6 0 0 0 2.002.68c1.461.25 3.003.07 4.494.23a10 10 0 0 0 3.593-.27a4 4 0 0 0 2.183-1.41c.22-.339.392-.706.51-1.092c.16-.5.25-1 .38-1.551a71 71 0 0 0 1.112-7.538c.124-.996.175-2 .15-3.003a.8.8 0 0 0-.18-.42"></path><path d="M9.256 16.156c.14.841.31 1.582.42 2.112c.07.34.12.591.14.711c.061.3.321.26.511.17a.23.23 0 0 0 .16-.1v-.79c0-.541 0-1.302-.11-2.153c0-.46-.09-.94-.16-1.421c0-.24-.06-.48-.11-.71c-.2-1.122-.46-2.143-.61-2.814a.302.302 0 1 0-.601.08c0 .681 0 1.742.11 2.873c0 .24 0 .47.07.711c.03.39.1.87.18 1.331m5.586 2.813a.34.34 0 0 0 .34-.34c.05-.61.22-1.542.33-2.563c.07-.56.13-1.15.15-1.711c.06-1.352 0-2.523 0-2.913a.31.31 0 0 0-.508-.247a.3.3 0 0 0-.102.207c-.06.35-.29 1.32-.46 2.502c-.05.34-.08.71-.11 1.071c-.03.36 0 .73 0 1.091c0 1.001 0 1.952.08 2.563a.34.34 0 0 0 .28.34"></path></g></svg>
                    </div>
                </div>
                <PathBar path={props.details.path} />
            </div>
            <div style={{ width: "100%", flex: 1, overflow: "auto", padding: "0.5rem" }}>
                <div class="files-container">
                    { props.details.files.map(file => (<FileView file={file} />))}
                </div>
            </div>
            <div id="file-context-menu">
                <ul>
                    <li id="menu-open">Open</li>
                    <li id="menu-download">Download</li>
                    <li id="menu-separator" style={{ borderTop: "1px solid #eee", height: "1px" }}></li>
                    <li id="menu-copy">Copy</li>
                    <li id="menu-cut">Cut</li>
                    <li id="menu-paste">Paste</li>
                    <li id="menu-separator" style={{ borderTop: "1px solid #eee", height: "1px" }}></li>
                    <li id="menu-delete">Delete</li>
                </ul>
            </div>
        </div>
    );
}

export default Directory;